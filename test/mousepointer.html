<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drag and Log Position</title>
    <style>
      .draggable {
        width: 100px;
        height: 100px;
        background-color: lightblue;
        position: absolute;
        cursor: move;
      }
    </style>
  </head>
  <body>
    <div id="dragMe" class="draggable" draggable="true"></div>

    <script>
      const draggable = document.getElementById("dragMe");
      let shiftX, shiftY;

      draggable.addEventListener("dragstart", function (event) {
        // Calculate shift between mouse position and element's top-left corner
        const rect = draggable.getBoundingClientRect();
        shiftX = event.clientX - rect.left;
        shiftY = event.clientY - rect.top;

        // Hide the default drag image
        event.dataTransfer.setDragImage(new Image(), 0, 0);
      });

      draggable.addEventListener("drag", function (event) {
        if (event.clientX === 0 && event.clientY === 0) return; // Ignore invalid events

        // Calculate new position of the element
        const newX = event.clientX - shiftX;
        const newY = event.clientY - shiftY;

        draggable.style.left = newX + "px";
        draggable.style.top = newY + "px";

        // Log the right-bottom corner position
        const right = newX + draggable.offsetWidth;
        const bottom = newY + draggable.offsetHeight;
        console.log(`Right-Bottom Corner Position - X: ${right}, Y: ${bottom}`);

        const cornerElement = document.createElement("div");
        cornerElement.style.position = "absolute";
        cornerElement.style.width = "10px";
        cornerElement.style.height = "10px";
        cornerElement.style.backgroundColor = "red";
        cornerElement.style.left = `${right}px`;
        cornerElement.style.top = `${bottom}px`;
        document.body.appendChild(cornerElement);
      });

      draggable.addEventListener("dragend", function () {
        // Ensure the element stays in its last dragged position
        draggable.style.left = parseInt(draggable.style.left) + "px";
        draggable.style.top = parseInt(draggable.style.top) + "px";
      });
    </script>
  </body>
</html>
